<!DOCTYPE html>
<html lang="en" class="h-full bg-gray-50">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Why Prompt Engineering Doesn't Scale | DSPy.rb Documentation</title>
  <meta name="description" content="Understanding the practical problems with string-based LLM development">
  
  <!-- Styles -->
  <link rel="stylesheet" href="/_bridgetown/static/css/index.css">
  
  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  
  <!-- Script for mobile menu toggle -->
  <script defer>
    document.addEventListener('DOMContentLoaded', function() {
      // Mobile menu toggle
      const mobileMenuButton = document.getElementById('mobile-menu-button');
      const mobileMenu = document.getElementById('mobile-menu');
      const mobileMenuClose = document.getElementById('mobile-menu-close');
      const mobileMenuBackdrop = document.getElementById('mobile-menu-backdrop');
      
      if (mobileMenuButton) {
        mobileMenuButton.addEventListener('click', () => {
          mobileMenu.classList.remove('hidden');
        });
      }
      
      if (mobileMenuClose) {
        mobileMenuClose.addEventListener('click', () => {
          mobileMenu.classList.add('hidden');
        });
      }
      
      if (mobileMenuBackdrop) {
        mobileMenuBackdrop.addEventListener('click', () => {
          mobileMenu.classList.add('hidden');
        });
      }
      
      // Dropdown toggles
      const dropdownButtons = document.querySelectorAll('[data-dropdown-toggle]');
      dropdownButtons.forEach(button => {
        button.addEventListener('click', () => {
          const isExpanded = button.getAttribute('aria-expanded') === 'true';
          button.setAttribute('aria-expanded', !isExpanded);
          const icon = button.querySelector('svg');
          if (icon) {
            icon.classList.toggle('rotate-90');
          }
          const targetId = button.getAttribute('data-dropdown-toggle');
          const target = document.getElementById(targetId);
          if (target) {
            target.classList.toggle('hidden');
          }
        });
      });
    });
  </script>
</head>
<body class="h-full">
  <!-- Header with navigation from Tailwind UI -->
  <header class="sticky top-0 z-40 bg-white shadow-sm">
    <nav class="mx-auto flex h-16 max-w-7xl items-center justify-between px-4 sm:px-6 lg:px-8">
      <div class="flex items-center">
        <!-- Mobile menu button -->
        <button type="button" id="mobile-menu-button" class="relative inline-flex items-center justify-center rounded-md p-2 text-gray-400 hover:bg-gray-100 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500 lg:hidden">
          <span class="absolute -inset-0.5"></span>
          <span class="sr-only">Open sidebar</span>
          <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
          </svg>
        </button>
        
        <!-- Logo -->
        <div class="flex flex-shrink-0 items-center px-4 lg:px-0">
          <a href="/" class="flex items-center gap-2">
            <div class="flex h-10 w-10 items-center justify-center rounded-lg bg-gradient-to-br from-red-600 to-red-700">
              <span class="text-xl font-bold text-white">D</span>
            </div>
            <span class="text-xl font-semibold text-gray-900">DSPy.rb</span>
          </a>
        </div>
      </div>
      
      <!-- Top navigation -->
      <div class="hidden lg:flex lg:gap-x-8">
        <a href="/getting-started/" class="text-sm font-medium text-gray-700 hover:text-gray-900">Getting Started</a>
        <a href="/core-concepts/" class="text-sm font-medium text-gray-700 hover:text-gray-900">Core Concepts</a>
        <a href="/optimization/" class="text-sm font-medium text-gray-700 hover:text-gray-900">Optimization</a>
        <a href="/advanced/" class="text-sm font-medium text-gray-700 hover:text-gray-900">Advanced</a>
      </div>
      
      <!-- Right side actions -->
      <div class="flex items-center gap-x-4">
        <a href="https://github.com/vicentereig/dspy.rb" class="text-gray-400 hover:text-gray-500">
          <span class="sr-only">GitHub</span>
          <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
            <path fill-rule="evenodd" d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z" clip-rule="evenodd" />
          </svg>
        </a>
      </div>
    </nav>
  </header>

  <div class="flex h-full">
    <!-- Sidebar navigation -->
    <aside class="hidden lg:fixed lg:inset-y-0 lg:z-30 lg:flex lg:w-72 lg:flex-col lg:pt-16">
      <div class="flex grow flex-col gap-y-5 overflow-y-auto border-r border-gray-200 bg-white px-6 pb-4 scrollbar-thin">
        <nav class="flex flex-1 flex-col pt-8">
          <ul role="list" class="flex flex-1 flex-col gap-y-7">
            <li>
              <ul role="list" class="-mx-2 space-y-1">
                <!-- Getting Started Section -->
                <li>
                  <button type="button" class="flex w-full items-center gap-x-3 rounded-md p-2 text-left text-sm font-semibold leading-6 text-gray-700 hover:bg-gray-50" aria-expanded="true" data-dropdown-toggle="getting-started-menu">
                    <svg class="h-5 w-5 shrink-0 text-gray-400 transition duration-200 rotate-90" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                      <path fill-rule="evenodd" d="M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z" clip-rule="evenodd" />
                    </svg>
                    Getting Started
                  </button>
                  <ul class="mt-1 px-2" id="getting-started-menu">
                    <li>
                      <a href="/getting-started/installation/" class="block rounded-md py-2 pl-9 pr-2 text-sm leading-6 text-gray-700 hover:bg-gray-50">Installation</a>
                    </li>
                    <li>
                      <a href="/getting-started/quick-start/" class="block rounded-md py-2 pl-9 pr-2 text-sm leading-6 text-gray-700 hover:bg-gray-50">Quick Start</a>
                    </li>
                    <li>
                      <a href="/getting-started/core-concepts/" class="block rounded-md py-2 pl-9 pr-2 text-sm leading-6 text-gray-700 hover:bg-gray-50">Core Concepts</a>
                    </li>
                  </ul>
                </li>
                
                <!-- Core Concepts Section -->
                <li>
                  <button type="button" class="flex w-full items-center gap-x-3 rounded-md p-2 text-left text-sm font-semibold leading-6 text-gray-700 hover:bg-gray-50" aria-expanded="true" data-dropdown-toggle="core-concepts-menu">
                    <svg class="h-5 w-5 shrink-0 text-gray-400 transition duration-200 rotate-90" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                      <path fill-rule="evenodd" d="M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z" clip-rule="evenodd" />
                    </svg>
                    Core Concepts
                  </button>
                  <ul class="mt-1 px-2" id="core-concepts-menu">
                    <li>
                      <a href="/core-concepts/signatures/" class="block rounded-md py-2 pl-9 pr-2 text-sm leading-6 text-gray-700 hover:bg-gray-50">Signatures</a>
                    </li>
                    <li>
                      <a href="/core-concepts/modules/" class="block rounded-md py-2 pl-9 pr-2 text-sm leading-6 text-gray-700 hover:bg-gray-50">Modules</a>
                    </li>
                    <li>
                      <a href="/core-concepts/predictors/" class="block rounded-md py-2 pl-9 pr-2 text-sm leading-6 text-gray-700 hover:bg-gray-50">Predictors</a>
                    </li>
                    <li>
                      <a href="/core-concepts/examples/" class="block rounded-md py-2 pl-9 pr-2 text-sm leading-6 text-gray-700 hover:bg-gray-50">Examples</a>
                    </li>
                  </ul>
                </li>
                
                <!-- Optimization Section -->
                <li>
                  <button type="button" class="flex w-full items-center gap-x-3 rounded-md p-2 text-left text-sm font-semibold leading-6 text-gray-700 hover:bg-gray-50" aria-expanded="true" data-dropdown-toggle="optimization-menu">
                    <svg class="h-5 w-5 shrink-0 text-gray-400 transition duration-200 rotate-90" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                      <path fill-rule="evenodd" d="M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z" clip-rule="evenodd" />
                    </svg>
                    Optimization
                  </button>
                  <ul class="mt-1 px-2" id="optimization-menu">
                    <li>
                      <a href="/optimization/prompt-optimization/" class="block rounded-md py-2 pl-9 pr-2 text-sm leading-6 text-gray-700 hover:bg-gray-50">Prompt Optimization</a>
                    </li>
                    <li>
                      <a href="/optimization/simple-optimizer/" class="block rounded-md py-2 pl-9 pr-2 text-sm leading-6 text-gray-700 hover:bg-gray-50">Simple Optimizer</a>
                    </li>
                    <li>
                      <a href="/optimization/miprov2/" class="block rounded-md py-2 pl-9 pr-2 text-sm leading-6 text-gray-700 hover:bg-gray-50">MIPROv2</a>
                    </li>
                    <li>
                      <a href="/optimization/evaluation/" class="block rounded-md py-2 pl-9 pr-2 text-sm leading-6 text-gray-700 hover:bg-gray-50">Evaluation</a>
                    </li>
                  </ul>
                </li>
                
                <!-- Advanced Section -->
                <li>
                  <button type="button" class="flex w-full items-center gap-x-3 rounded-md p-2 text-left text-sm font-semibold leading-6 text-gray-700 hover:bg-gray-50" aria-expanded="true" data-dropdown-toggle="advanced-menu">
                    <svg class="h-5 w-5 shrink-0 text-gray-400 transition duration-200 rotate-90" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                      <path fill-rule="evenodd" d="M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z" clip-rule="evenodd" />
                    </svg>
                    Advanced
                  </button>
                  <ul class="mt-1 px-2" id="advanced-menu">
                    <li>
                      <a href="/advanced/pipelines/" class="block rounded-md py-2 pl-9 pr-2 text-sm leading-6 text-gray-700 hover:bg-gray-50">Pipelines</a>
                    </li>
                    <li>
                      <a href="/advanced/rag/" class="block rounded-md py-2 pl-9 pr-2 text-sm leading-6 text-gray-700 hover:bg-gray-50">RAG</a>
                    </li>
                    <li>
                      <a href="/advanced/complex-types/" class="block rounded-md py-2 pl-9 pr-2 text-sm leading-6 text-gray-700 hover:bg-gray-50">Complex Types</a>
                    </li>
                    <li>
                      <a href="/advanced/custom-metrics/" class="block rounded-md py-2 pl-9 pr-2 text-sm leading-6 text-gray-700 hover:bg-gray-50">Custom Metrics</a>
                    </li>
                  </ul>
                </li>
                
                <!-- Production Section -->
                <li>
                  <button type="button" class="flex w-full items-center gap-x-3 rounded-md p-2 text-left text-sm font-semibold leading-6 text-gray-700 hover:bg-gray-50" aria-expanded="true" data-dropdown-toggle="production-menu">
                    <svg class="h-5 w-5 shrink-0 text-gray-400 transition duration-200 rotate-90" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                      <path fill-rule="evenodd" d="M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z" clip-rule="evenodd" />
                    </svg>
                    Production
                  </button>
                  <ul class="mt-1 px-2" id="production-menu">
                    <li>
                      <a href="/production/storage/" class="block rounded-md py-2 pl-9 pr-2 text-sm leading-6 text-gray-700 hover:bg-gray-50">Storage</a>
                    </li>
                    <li>
                      <a href="/production/registry/" class="block rounded-md py-2 pl-9 pr-2 text-sm leading-6 text-gray-700 hover:bg-gray-50">Registry</a>
                    </li>
                    <li>
                      <a href="/production/observability/" class="block rounded-md py-2 pl-9 pr-2 text-sm leading-6 text-gray-700 hover:bg-gray-50">Observability</a>
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
        </nav>
      </div>
    </aside>

    <!-- Mobile sidebar -->
    <div class="relative z-50 hidden" id="mobile-menu" role="dialog" aria-modal="true">
      <div class="fixed inset-0 bg-gray-900/80" id="mobile-menu-backdrop"></div>
      <div class="fixed inset-0 flex">
        <div class="relative mr-16 flex w-full max-w-xs flex-1">
          <div class="absolute left-full top-0 flex w-16 justify-center pt-5">
            <button type="button" class="-m-2.5 p-2.5" id="mobile-menu-close">
              <span class="sr-only">Close sidebar</span>
              <svg class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
              </svg>
            </button>
          </div>
          
          <div class="flex grow flex-col gap-y-5 overflow-y-auto bg-white px-6 pb-4">
            <div class="flex h-16 shrink-0 items-center">
              <a href="/" class="flex items-center gap-2">
                <div class="flex h-10 w-10 items-center justify-center rounded-lg bg-gradient-to-br from-red-600 to-red-700">
                  <span class="text-xl font-bold text-white">D</span>
                </div>
                <span class="text-xl font-semibold text-gray-900">DSPy.rb</span>
              </a>
            </div>
            <nav class="flex flex-1 flex-col">
              <!-- Mobile navigation items (same structure as desktop) -->
            </nav>
          </div>
        </div>
      </div>
    </div>

    <!-- Main content -->
    <main class="flex-1 lg:pl-72">
      <div class="mx-auto max-w-4xl px-4 py-8 sm:px-6 lg:px-8 lg:py-12">
        <!-- Breadcrumb -->
        
        
        <!-- Page content -->
        <article class="prose prose-gray max-w-none">
          <h1 id="why-prompt-engineering-doesnt-scale">Why Prompt Engineering Doesn’t Scale</h1>

<p><em>And how to build LLM applications that actually work in production</em></p>

<h2 id="the-problem-everyone-faces">The Problem Everyone Faces</h2>

<p>Let’s be honest about something most LLM tutorials don’t mention: <strong>prompt engineering breaks down in production</strong>.</p>

<p>If you’ve built LLM applications before, you’ve probably experienced this cycle:</p>
<ol>
  <li>Craft a prompt that works perfectly in testing</li>
  <li>Deploy it with confidence</li>
  <li>Watch it fail in weird, unpredictable ways with real user data</li>
  <li>Spend hours debugging string concatenation instead of building features</li>
  <li>Add more special cases and hope for the best</li>
</ol>

<p>This isn’t a skill problem—it’s an approach problem.</p>

<h2 id="why-string-based-development-fails">Why String-Based Development Fails</h2>

<p>When you’re doing prompt engineering, you’re essentially:</p>

<ul>
  <li><strong>Programming in natural language</strong> (which is ambiguous by design)</li>
  <li><strong>Debugging without logs</strong> (you can’t see the LLM’s “reasoning”)</li>
  <li><strong>Testing by running examples</strong> (instead of systematic verification)</li>
  <li><strong>Scaling by adding complexity</strong> (more edge cases = longer prompts)</li>
</ul>

<p>It’s like building a web application by concatenating HTML strings instead of using templates and components.</p>

<h2 id="the-engineering-alternative">The Engineering Alternative</h2>

<p>Here’s what changes when you treat LLMs as programmable modules instead of text processors:</p>

<h3 id="from-string-manipulation-to-interfaces"><strong>From String Manipulation to Interfaces</strong></h3>

<p><strong>Prompt Engineering Approach:</strong></p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Fragile string manipulation</span>
<span class="k">def</span> <span class="nf">analyze_sentiment</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
  <span class="n">prompt</span> <span class="o">=</span> <span class="s2">"Analyze sentiment of: </span><span class="si">#{</span><span class="n">text</span><span class="si">}</span><span class="s2">. Return 'positive', 'negative', or 'neutral'."</span>
  
  <span class="n">response</span> <span class="o">=</span> <span class="n">llm</span><span class="p">.</span><span class="nf">complete</span><span class="p">(</span><span class="n">prompt</span><span class="p">)</span>
  <span class="c1"># Hope it formats correctly...</span>
  <span class="n">parse_sentiment</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>  <span class="c1"># Pray this doesn't crash</span>
<span class="k">end</span>
</code></pre></div></div>

<p><strong>Structured Programming Approach:</strong></p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Clear, typed interface</span>
<span class="k">class</span> <span class="nc">SentimentAnalysis</span> <span class="o">&lt;</span> <span class="no">DSPy</span><span class="o">::</span><span class="no">Signature</span>
  <span class="n">description</span> <span class="s2">"Analyze the emotional tone of text"</span>
  
  <span class="n">input</span> <span class="k">do</span>
    <span class="n">const</span> <span class="ss">:text</span><span class="p">,</span> <span class="no">String</span>
  <span class="k">end</span>
  
  <span class="n">output</span> <span class="k">do</span>
    <span class="n">const</span> <span class="ss">:sentiment</span><span class="p">,</span> <span class="no">String</span><span class="p">,</span> <span class="ss">enum: </span><span class="p">[</span><span class="s2">"positive"</span><span class="p">,</span> <span class="s2">"negative"</span><span class="p">,</span> <span class="s2">"neutral"</span><span class="p">]</span>
    <span class="n">const</span> <span class="ss">:confidence</span><span class="p">,</span> <span class="no">Float</span>
    <span class="n">const</span> <span class="ss">:reasoning</span><span class="p">,</span> <span class="no">String</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">analyzer</span> <span class="o">=</span> <span class="no">DSPy</span><span class="o">::</span><span class="no">Predict</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="no">SentimentAnalysis</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">analyzer</span><span class="p">.</span><span class="nf">call</span><span class="p">(</span><span class="ss">text: </span><span class="s2">"I love Ruby programming!"</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="from-hope-to-verification"><strong>From Hope to Verification</strong></h3>

<p><strong>Prompt Engineering:</strong></p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Cross your fingers</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">llm</span><span class="p">.</span><span class="nf">complete</span><span class="p">(</span><span class="n">prompt</span><span class="p">)</span>
<span class="c1"># Maybe it worked? Maybe it didn't?</span>
</code></pre></div></div>

<p><strong>Structured Programming:</strong></p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Systematic verification</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">analyzer</span><span class="p">.</span><span class="nf">call</span><span class="p">(</span><span class="ss">text: </span><span class="s2">"..."</span><span class="p">)</span>

<span class="c1"># Type checking happens automatically</span>
<span class="n">expect</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="nf">sentiment</span><span class="p">).</span><span class="nf">to</span> <span class="n">be_in</span><span class="p">([</span><span class="s2">"positive"</span><span class="p">,</span> <span class="s2">"negative"</span><span class="p">,</span> <span class="s2">"neutral"</span><span class="p">])</span>
<span class="n">expect</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="nf">confidence</span><span class="p">).</span><span class="nf">to</span> <span class="n">be_between</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="n">expect</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="nf">reasoning</span><span class="p">).</span><span class="nf">to</span> <span class="n">be_a</span><span class="p">(</span><span class="no">String</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="from-manual-testing-to-automated-testing"><strong>From Manual Testing to Automated Testing</strong></h3>

<p><strong>Prompt Engineering:</strong></p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Manual testing only</span>
<span class="nb">puts</span> <span class="s2">"Testing with: 'Great product!'"</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">analyze_sentiment</span><span class="p">(</span><span class="s2">"Great product!"</span><span class="p">)</span>
<span class="nb">puts</span> <span class="s2">"Response: </span><span class="si">#{</span><span class="n">response</span><span class="si">}</span><span class="s2">"</span>  <span class="c1"># Hope it's what you expect</span>
</code></pre></div></div>

<p><strong>Structured Programming:</strong></p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Systematic test suites</span>
<span class="no">RSpec</span><span class="p">.</span><span class="nf">describe</span> <span class="no">SentimentAnalysis</span> <span class="k">do</span>
  <span class="n">let</span><span class="p">(</span><span class="ss">:analyzer</span><span class="p">)</span> <span class="p">{</span> <span class="no">DSPy</span><span class="o">::</span><span class="no">Predict</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="no">SentimentAnalysis</span><span class="p">)</span> <span class="p">}</span>
  
  <span class="n">it</span> <span class="s2">"identifies positive sentiment"</span> <span class="k">do</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">analyzer</span><span class="p">.</span><span class="nf">call</span><span class="p">(</span><span class="ss">text: </span><span class="s2">"This is excellent!"</span><span class="p">)</span>
    
    <span class="n">expect</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="nf">sentiment</span><span class="p">).</span><span class="nf">to</span> <span class="n">eq</span><span class="p">(</span><span class="s2">"positive"</span><span class="p">)</span>
    <span class="n">expect</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="nf">confidence</span><span class="p">).</span><span class="nf">to</span> <span class="n">be</span> <span class="o">&gt;</span> <span class="mf">0.7</span>
  <span class="k">end</span>
  
  <span class="n">it</span> <span class="s2">"handles edge cases"</span> <span class="k">do</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">analyzer</span><span class="p">.</span><span class="nf">call</span><span class="p">(</span><span class="ss">text: </span><span class="s2">""</span><span class="p">)</span>
    
    <span class="n">expect</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="nf">sentiment</span><span class="p">).</span><span class="nf">to</span> <span class="n">eq</span><span class="p">(</span><span class="s2">"neutral"</span><span class="p">)</span>
    <span class="n">expect</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="nf">confidence</span><span class="p">).</span><span class="nf">to</span> <span class="n">be</span> <span class="o">&lt;</span> <span class="mf">0.5</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<h2 id="real-world-example-email-classification">Real-World Example: Email Classification</h2>

<p>Let me show you how this plays out with a real system I helped debug.</p>

<h3 id="the-prompt-engineering-version"><strong>The Prompt Engineering Version</strong></h3>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">EmailClassifier</span>
  <span class="k">def</span> <span class="nf">classify</span><span class="p">(</span><span class="n">email</span><span class="p">)</span>
    <span class="n">prompt</span> <span class="o">=</span> <span class="o">&lt;&lt;~</span><span class="no">PROMPT</span><span class="sh">
      Classify this email:
      
      Subject: </span><span class="si">#{</span><span class="n">email</span><span class="p">[</span><span class="ss">:subject</span><span class="p">]</span><span class="si">}</span><span class="sh">
      Body: </span><span class="si">#{</span><span class="n">email</span><span class="p">[</span><span class="ss">:body</span><span class="p">]</span><span class="si">}</span><span class="sh">
      
      Categories: billing, technical, general, urgent
      
      Respond with just the category name.
</span><span class="no">    PROMPT</span>
    
    <span class="n">response</span> <span class="o">=</span> <span class="n">llm</span><span class="p">.</span><span class="nf">complete</span><span class="p">(</span><span class="n">prompt</span><span class="p">)</span>
    <span class="n">response</span><span class="p">.</span><span class="nf">strip</span><span class="p">.</span><span class="nf">downcase</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p><strong>Production problems we hit:</strong></p>
<ul>
  <li>Sometimes returned “Billing” instead of “billing” (case sensitivity)</li>
  <li>Occasionally returned explanations instead of categories</li>
  <li>Failed when email content had special characters</li>
  <li>No confidence scores or reasoning visibility</li>
  <li>Impossible to test edge cases systematically</li>
</ul>

<h3 id="the-structured-version"><strong>The Structured Version</strong></h3>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">EmailClassification</span> <span class="o">&lt;</span> <span class="no">DSPy</span><span class="o">::</span><span class="no">Signature</span>
  <span class="n">description</span> <span class="s2">"Classify support emails into appropriate categories"</span>
  
  <span class="n">input</span> <span class="k">do</span>
    <span class="n">const</span> <span class="ss">:subject</span><span class="p">,</span> <span class="no">String</span>
    <span class="n">const</span> <span class="ss">:body</span><span class="p">,</span> <span class="no">String</span>
    <span class="n">const</span> <span class="ss">:sender_type</span><span class="p">,</span> <span class="no">String</span>
  <span class="k">end</span>
  
  <span class="n">output</span> <span class="k">do</span>
    <span class="n">const</span> <span class="ss">:category</span><span class="p">,</span> <span class="no">String</span><span class="p">,</span> <span class="ss">enum: </span><span class="p">[</span><span class="s2">"billing"</span><span class="p">,</span> <span class="s2">"technical"</span><span class="p">,</span> <span class="s2">"general"</span><span class="p">,</span> <span class="s2">"urgent"</span><span class="p">]</span>
    <span class="n">const</span> <span class="ss">:confidence</span><span class="p">,</span> <span class="no">Float</span>
    <span class="n">const</span> <span class="ss">:reasoning</span><span class="p">,</span> <span class="no">String</span>
    <span class="n">const</span> <span class="ss">:priority</span><span class="p">,</span> <span class="no">String</span><span class="p">,</span> <span class="ss">enum: </span><span class="p">[</span><span class="s2">"low"</span><span class="p">,</span> <span class="s2">"medium"</span><span class="p">,</span> <span class="s2">"high"</span><span class="p">]</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">classifier</span> <span class="o">=</span> <span class="no">DSPy</span><span class="o">::</span><span class="no">Predict</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="no">EmailClassification</span><span class="p">)</span>
</code></pre></div></div>

<p><strong>What we gained:</strong></p>
<ul>
  <li><strong>Guaranteed format</strong> - Always returns expected structure</li>
  <li><strong>Type validation</strong> - Categories are checked automatically</li>
  <li><strong>Confidence tracking</strong> - Know when the system is uncertain</li>
  <li><strong>Reasoning visibility</strong> - Understand decision making</li>
  <li><strong>Systematic testing</strong> - Comprehensive test coverage</li>
  <li><strong>Performance tracking</strong> - Monitor accuracy over time</li>
</ul>

<h2 id="the-engineering-mindset-shift">The Engineering Mindset Shift</h2>

<p>This isn’t about philosophical transformation—it’s about applying standard software engineering practices to LLM applications:</p>

<h3 id="from-llm-as-magic-to-llm-as-module"><strong>From “LLM as Magic” to “LLM as Module”</strong></h3>

<ul>
  <li><strong>Before</strong>: LLM behavior feels unpredictable and mysterious</li>
  <li><strong>After</strong>: LLM behavior follows interfaces you can understand and test</li>
</ul>

<h3 id="from-debug-by-guessing-to-debug-by-analysis"><strong>From “Debug by Guessing” to “Debug by Analysis”</strong></h3>

<ul>
  <li><strong>Before</strong>: When something breaks, you tweak prompts randomly</li>
  <li><strong>After</strong>: When something breaks, you examine inputs, outputs, and logs</li>
</ul>

<h3 id="from-scale-by-complexity-to-scale-by-composition"><strong>From “Scale by Complexity” to “Scale by Composition”</strong></h3>

<ul>
  <li><strong>Before</strong>: Complex tasks require increasingly complex prompts</li>
  <li><strong>After</strong>: Complex tasks are built from simple, composable modules</li>
</ul>

<h2 id="common-concerns">Common Concerns</h2>

<p><strong>“Doesn’t this add complexity?”</strong></p>

<p>Initially, yes. But complexity that’s structured and testable is manageable complexity. Prompt engineering complexity is chaotic and unmaintainable.</p>

<p><strong>“What about performance?”</strong></p>

<p>Structured approaches are typically faster because you’re not parsing free-form text responses. Type validation happens once, not on every response.</p>

<p><strong>“Does this work with all LLMs?”</strong></p>

<p>Yes. DSPy.rb works with any LLM that can follow instructions. The structured approach is more reliable across different models, not less.</p>

<h2 id="your-current-pain-points">Your Current Pain Points</h2>

<p>Think about your existing LLM applications:</p>

<p><strong>Development Issues:</strong></p>
<ul>
  <li>How much time do you spend debugging prompt formatting?</li>
  <li>How often do parsing errors crash your application?</li>
  <li>How do you test LLM behavior systematically?</li>
</ul>

<p><strong>Production Issues:</strong></p>
<ul>
  <li>What happens when LLMs return unexpected formats?</li>
  <li>How do you monitor LLM application performance?</li>
  <li>How do you debug failures in production?</li>
</ul>

<p><strong>Scaling Issues:</strong></p>
<ul>
  <li>How do you handle new edge cases without breaking existing functionality?</li>
  <li>How do you coordinate LLM development across a team?</li>
  <li>How do you maintain consistency as complexity grows?</li>
</ul>

<h2 id="next-steps">Next Steps</h2>

<p>Ready to move beyond prompt engineering? Here’s how to start:</p>

<h3 id="-learn-the-fundamentals"><strong>🔧 Learn the Fundamentals</strong></h3>
<p><strong><a href="/foundations/">Core Concepts →</a></strong><br />
<em>Master the building blocks of structured LLM programming</em></p>

<h3 id="-build-your-first-system"><strong>💻 Build Your First System</strong></h3>
<p><strong><a href="/getting-started/first-program">First Program →</a></strong><br />
<em>Hands-on tutorial building a reliable Q&amp;A system</em></p>

<h3 id="️-scale-to-production"><strong>🏗️ Scale to Production</strong></h3>
<p><strong><a href="/systems/">System Building →</a></strong><br />
<em>Chain modules into production-ready workflows</em></p>

<h2 id="the-path-forward">The Path Forward</h2>

<p>You don’t need to abandon everything you know about LLMs. You just need better tools for building applications that work reliably.</p>

<p>DSPy.rb gives you those tools. The rest is just good software engineering.</p>

<hr />

<p><em>“The goal isn’t to stop using LLMs. It’s to start engineering with them.”</em></p>

        </article>
        
        <!-- Next/Previous navigation -->
        
        <nav class="mt-12 flex items-center justify-between border-t border-gray-200 pt-6">
          
          
          <div class="flex-1 text-right">
            <a href="" class="group flex items-center justify-end text-sm font-medium text-gray-500 hover:text-gray-700">
              DSPy.rb - Program LLMs, Don't Prompt Them
              <svg class="ml-3 h-5 w-5 flex-shrink-0 text-gray-400 group-hover:text-gray-600" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z" clip-rule="evenodd" />
              </svg>
            </a>
          </div>
          
        </nav>
        
      </div>
    </main>
  </div>
</body>
</html>